modules = ["nodejs-20"]
run = "PORT=5000 npx tsx server/index.ts"

[[ports]]
localPort = 5000
externalPort = 80

[nix]
channel = "stable-25_05"

[deployment]
build = ["sh", "-c", "npx vite build"]
run = ["sh", "-c", "PORT=5000 npx tsx server/index.ts"]
deploymentTarget = "cloudrun"
publicDir = "dist/public"

[[deployment.healthChecks]]
name = "web"
path = "/health"

[agent]
integrations = ["javascript_openai_ai_integrations:2.0.0"]
